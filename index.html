<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz App</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
	<style>
		@import url('https://fonts.googleapis.com/css2?family=Jacquard+12&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');

*{
  padding: 0;
  margin: 0;
  box-sizing: border-box;
}
:root{
  --light-color:#fff;
  --dark-color:black;
  --light-purple-color:#8854c0;
  --grey-color:#f2f2f2;
  --transition: all 300ms easy-in-out;
}
.flex{
  display:flex;
  align-items: center;
  justify-content: center;
}
body{
  font-family: 'poppins',sans-serif;
  min-height: 100vh;
  color:var(--dark-color);
  background-color:var(--grey-color)
}
.wrapper{
  background-color: var(--light-color);
  padding: 1.5rem 4rem 3rem 4rem;
  width:600px;
  height:680px;
  border-top-left-radius: 1.5rem;
  border-bottom-right-radius: 1.5rem;
  position:relative;
  box-shadow: 0 4px 6px rgb(0 0 0 /10%),0 1px 3px rgb(0 0 0/10%);
}
.quiz-title{
  text-align: center;
  font-size: 2rem;
}
.quiz-score{
  text-align: center;
  font-weight: 600;
  font-size: 1.2rem;
  border:5px solid var(--grey-color);
  margin-bottom: 1rem;
  font-weight: bold;
  width: 100px;
  height: 50px;
  margin:.5rem auto;
  color: var(--light-purple-color);
}
.quiz-question{
  font-size: 1.2rem;
  text-align: center;
  line-height: 1.3;
  margin-bottom: 2rem;
}
.quiz-question .category{
  font-size:0.9rem;
  font-weight: 500;
  background-color: var(--light-purple-color);
  color:var(--light-color);
  padding:.2rem .4rem;
  border-radius: .2rem;
  margin-top: 0.5rem;
  display: inline-block;
}
.quiz-options{
  list-style-type: none;
  margin:1rem 0;
}
.quiz-options li{
  border-radius: 0.5rem;
  font-weight: 600;
  margin: .7rem 0;
  padding: .4rem 1.2rem;
  cursor: pointer;
  border:3px solid var(--light-purple-color);
  background-color: var(--light-purple-color);
  color: #f2f2f2;
  box-shadow: 0 5px 0 0 #550855;
  transition: var(--transition);
}
.quiz-options li:hover{
  background-color: var(--grey-color);
  color:var(--dark-color);
  border-color: var(--grey-color);
  box-shadow: 0 4px 0 0 #6e0e0e;
}
.quiz-options li:active{
  transform: scale(0.97);
}
.selected{
  border-color: var(--grey-color)!important;
  color:var(--dark-color)!important;
  background-color: var(--grey-color)!important;
  box-shadow: 0 4px 0 0 #bbb !important;
}
.quiz-foot button{
  border:none;
  border-radius: 0.5rem;
  outline: 0;
  font-family: 'poppins','sans-serif';
  font-size: 1.2rem;
  font-weight: 600;
  padding: .5rem 1rem;
  margin: 0 auto;
  text-transform: uppercase;
  cursor: pointer;
  display: block;
  border-color: var(--grey-color);
  color: #000;
  letter-spacing: 2px;
  transition: var(--transition);
  box-shadow: 0 4px 0 0 #bbb;
}
.quiz-foot button:hover{
  background-color:#e6e6e6;
  box-shadow: 0 4px 0 0 #a7a7a7;
}
.quiz-foot button:active{
  transform: scale(0.95);
}
#play-again{
  display: none;
}
/*results styling*/
#result{
  padding: .7rem 0;
  text-align: center;
  font-weight: 600;
  font-size: 1.3rem;
}
#result i{
  height: 30px;
  height: 30px;
  border-radius: 50%;
  line-height: 30px;
  margin-right:.5rem ;
  margin-bottom: .5rem;
  background-color: var(--light-purple-color);
  color:var(--light-color);
}
@media(max-width:678px){
  .quiz-title{
    font-size: 1.6rem;
  }
  .wrapper{
    margin: 3rem 0;
    width:90%;
    padding:1.5rem 1rem 3rem 1rem;
    border-top-left-radius: 0;
    border-top-right-radius: 0;
  }
  .quiz-foot bottom{
    font-size: 1rem;
  }
}
	</style>
<body class="flex">
  <div class="wrapper">
    <div class="quiz-container">
      <div class="quiz-head">
        <h1 class="quiz-title">Quiz Game</h1>
        <div class="quiz-score">
          <span id="correct-score"></span>/<span id="total-question"></span>
        </div>
      </div>
      <div class="quiz-body">
        <h2 class="quiz-question"id="question"><!--What is the Full form of HTTP? <br><span class="category">Geography</span>--></h2>
        <ul class="quiz-options">
          <!--<li>1.Hyper text transfer package</li>
          <li>2.Hyper text transfer protocal</li>
          <li>3.Hyper text transfer parser</li>
          <li>4.None of the above</li>-->
        </ul>
        <div id="result">
          <!--results here-->
        </div>
      </div>
      <div class="quiz-foot">
        <button type="button"id="check-answer">Check Answer</button>
        <button type="button"id="play-again">Play Again!</button>
      </div>
    </div>
  </div>


<!--quiz app js-->
  <script>
	const _question = document.getElementById("question");
const _options = document.querySelector(".quiz-options");
const _correctScore = document.getElementById("correct-score");
const _totalQuestion = document.getElementById("total-question");
const _checkBtn = document.getElementById("check-answer");
const _playAgainBtn = document.getElementById("play-again");
const _result = document.getElementById("result");

let questions = [];
let selectedQuestions = [];
let currentQuestionIndex = 0;
let correctScore = 0;
let totalQuestions = 10;

// Event Listeners
document.addEventListener("DOMContentLoaded", async () => {
  await loadQuestions();
  startQuiz();
  _totalQuestion.textContent = totalQuestions;
  _correctScore.textContent = correctScore;
  eventListeners();
});

function eventListeners() {
  _checkBtn.addEventListener("click", checkAnswer);
  _playAgainBtn.addEventListener("click", restartQuiz);
}

// Load Questions from local JSON file
async function loadQuestions() {
  try {
    const response = await fetch("questions.json"); // Fetch the JSON file
    questions = await response.json();
    if (questions.length >= 10) {
      selectedQuestions = getRandomQuestions(questions, 10); // Select 10 random questions
    } else {
      console.error("Not enough questions in the JSON file.");
    }
  } catch (error) {
    console.error("Error loading questions:", error);
  }
}

// Function to get random 10 questions from the list
function getRandomQuestions(questions, num) {
  let shuffled = [...questions].sort(() => 0.5 - Math.random()); // Shuffle questions
  return shuffled.slice(0, num); // Pick first 'num' questions
}

// Start the Quiz
function startQuiz() {
  if (selectedQuestions.length > 0) {
    loadQuestion();
  } else {
    console.error("No questions available to start the quiz.");
  }
}

// Load and display a question
function loadQuestion() {
  if (currentQuestionIndex >= selectedQuestions.length) {
    showResult();
    return;
  }

  _checkBtn.disabled = false;
  _result.innerHTML = "";

  const questionData = selectedQuestions[currentQuestionIndex];
  _question.innerHTML = `${questionData.question} <br> <span class="category">${questionData.category}</span>`;

  let optionsList = [...questionData.options]; // Copy options
  _options.innerHTML = optionsList
    .map(
      (option, index) =>
        `<li> ${index + 1}. <span> ${option} </span> </li>`
    )
    .join("");

  selectOption();
}

// Highlight selected option
function selectOption() {
  _options.querySelectorAll("li").forEach((option) => {
    option.addEventListener("click", () => {
      if (_options.querySelector(".selected")) {
        _options.querySelector(".selected").classList.remove("selected");
      }
      option.classList.add("selected");
    });
  });
}

// Check Answer
// Check Answer and Update Score
function checkAnswer() {
    _checkBtn.disabled = true;
  
    if (_options.querySelector(".selected")) {
      let selectedAnswer = _options.querySelector(".selected span").textContent.trim();
      let correctAnswer = selectedQuestions[currentQuestionIndex].answer;
  
      if (selectedAnswer === correctAnswer) {
        correctScore++; // Increase score
        _result.innerHTML = `<p><i class="fas fa-check"></i> Correct Answer! +1 Point</p>`;
      } else {
        _result.innerHTML = `<p><i class="fas fa-times"></i> Wrong Answer!</p>
        <small><b>Correct Answer:</b> ${correctAnswer}</small>`;
      }
  
      // Update the score display
      _correctScore.textContent = correctScore;
  
      currentQuestionIndex++;
      setTimeout(loadQuestion, 500); // Load next question after 500ms
    } else {
      _result.innerHTML = `<p><i class="fas fa-question"></i> Please select an option!</p>`;
      _checkBtn.disabled = false;
    }
  }
  

// Show Final Score
function showResult() {
  _question.innerHTML = `<p>Quiz Completed!</p>`;
  _options.innerHTML = `<p>Your final score is ${correctScore}/${totalQuestions}.</p>`;
  _checkBtn.style.display = "none";
  _playAgainBtn.style.display = "block";
}

// Restart Quiz
function restartQuiz() {
  correctScore = 0;
  currentQuestionIndex = 0;
  _playAgainBtn.style.display = "none";
  _checkBtn.style.display = "block";
  _checkBtn.disabled = false;
  _result.innerHTML = "";
  
  selectedQuestions = getRandomQuestions(questions, 10); // Pick new set of 10 questions
  startQuiz();
}

  </script>
</body>
</html>
